"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const memfs_1 = require("memfs");
const literals_1 = require("@angular-devkit/core/src/utils/literals");
const fileutils_1 = require("./fileutils");
jest.mock('fs', () => require('memfs').fs);
jest.mock('./app-root', () => ({ appRootPath: '/root' }));
describe('fileutils', () => {
    beforeEach(() => {
        memfs_1.vol.fromJSON({
            './README.md': 'hello',
            './.nxignore': literals_1.stripIndents `
          apps/demo/tmp.txt
          tmp/
        `,
            './.gitignore': literals_1.stripIndents `
          *.js
          node_modules/
        `,
            './apps/demo/src/index.ts': 'console.log("hello");',
            './apps/demo/tmp.txt': '...',
            './apps/demo/tmp.js': 'console.log("tmp")',
            './workspace.json': '{}',
        }, '/root');
    });
    describe('createDirectory', () => {
        it('should recursively create the directory', () => {
            fileutils_1.createDirectory('/root/b/c');
            expect(memfs_1.fs.statSync('/root').isDirectory()).toBe(true);
            expect(memfs_1.fs.statSync('/root/b').isDirectory()).toBe(true);
            expect(memfs_1.fs.statSync('/root/b/c').isDirectory()).toBe(true);
        });
    });
});
